version: "v1"
scope: "NonDiagonalRigid"

quality_tolerance:
  eps: 0.015

odi_tolerance:
  delta: 0.15

gate_q61_signal_reality:
  enabled: true
  nulls:
    - null_shuffle
    - null_gauss
  metrics:
    - offdiag_mean
    - tc_per_dim
  z_threshold: 2.0
  min_pass_fraction: 0.70

gate_q62_predictive_utility:
  enabled: true
  target: "Drop_{k->k+1} = max(0, Q_k - Q_{k+1})"
  statistic: "spearman"
  rho_median_min: 0.40
  ci_level: 0.95
  ci_lower_min: 0.0
  at_least_one_family_strict: true
  other_family_non_negative: true

gate_q63_policy_benefit:
  enabled: true
  compare_joint_vs_quality_only: true
  pass_any:
    - q_within_eps_and_param_reduction_min: 0.20
    - param_similarity_tol: 0.05
      odi_improvement_min_robust_z: 0.30
  ood_quality_degradation_max: 0.015

gate_q64_cross_setting_consistency:
  enabled: true
  required_families:
    - baseline_diag
    - fullcov
  required_distributions:
    - id_test
    - ood_post_training_custom
  seed_consistency_min: 0.66
  allow_neighbor_step: 1

required_outputs:
  - evidence_gate_summary.md
  - evidence_gate_summary.json
  - signal_reality_null_test.csv
  - predictive_utility_stepwise.csv
  - policy_benefit_comparison.csv
  - cross_setting_consistency.csv
